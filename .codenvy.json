{
  "v": "4.0",
  "workspace": {
    "name": "express-wss",
    "environments": {
      "express-env": {
        "recipe": {
          "type": "dockerimage",
          "location": "tompizmor/codenvy-express-factory-3:latest"
        },
        "machines": {
          "ws-machine": {
            "agents": [
              "org.eclipse.che.terminal",
              "org.eclipse.che.ws-agent",
              "org.eclipse.che.ssh" 
            ],
            "servers": {},
            "attributes": {
              "memoryLimitsBytes": "2147483648"
            }
          }
        }
      }
    },
    "defaultEnv": "express-env",
    "projects": [{
      "name": "express-sample",
      "type": "node-js",
      "path": "/express-sample",
      "source": {
        "type": "git",
        "location": "https://github.com/bitnami/bitnami-docker-che-blank-sample",
        "parameters": {
          "keepVcs": "false"
        }
      },
      "mixins": [
        "pullrequest"
      ],
      "attributes": {
        "local_branch": ["contrib"],
        "contribute_to_branch": ["master"]
      },
      "modules": [],
      "problems": []
    }],
    "commands": [{
      "name": "1.Create project",
      "type": "custom",
      "commandLine": "sudo HOME=/root nami execute express generateProject --projectDir=/projects $(basename ${current.project.path})",
      "attributes": {}
    }, {
      "name": "2.Run",
      "type": "custom",
      "commandLine": "cd ${current.project.path} && npm start",
      "attributes": {
        "previewUrl": "http://${server.port.3000}/"
      }
    }, {
      "name": "3.Initialize",
      "type": "custom",
      "commandLine": "sudo HOME=/root nami initialize express --projectsDirectory=/projects --projectName=$(basename ${current.project.path}) --createProject=false ; sudo HOME=/root nami execute express generateProject --projectDir=/projects $(basename ${current.project.path})",
      "attributes": {}
    }, {
      "name": "4.Call app-entrypoint",
      "type": "custom",
      "commandLine": "cd / && ./app-entrypoint.sh",
      "attributes": {}
    }]
  },
  "ide": {
    "onProjectsLoaded": {
      "actions": [{
        "id": "runCommand",
        "properties": {
          "name": "1.CreateProject"
        }
      }]
    }
  }
}
